<% title = "Dashboard â€“ " + guild.name %>

<h1>ğŸ”§ Configuration de <%= guild.name %></h1>

<!-- ğŸ‘¤ Infos -->
<p>ID du serveur : <%= guild.id %></p>
<p>ConnectÃ© en tant que <strong><%= user.username %>#<%= user.discriminator %></strong></p>

<hr>

<!-- âœ… Modules -->
<h2>ğŸ›¡ï¸ Statut des modules</h2>
<p>
  ModÃ©ration :
  <% if (config.moderation) { %>
    <span class="status on">âœ… ActivÃ©</span>
  <% } else { %>
    <span class="status off">âŒ DÃ©sactivÃ©</span>
  <% } %>
</p>

<hr>

<form action="/dashboard/<%= guild.id %>" method="POST">
  <!-- âœï¸ PrÃ©fixe -->
  <label for="prefix">PrÃ©fixe du bot :</label>
  <input type="text" id="prefix" name="prefix" value="<%= config.prefix || '!' %>" maxlength="5" required />
  <br><br>

  <!-- âœ… Activer modÃ©ration -->
  <label>
    <input type="checkbox" name="moderation" value="true" <%= config.moderation ? "checked" : "" %> />
    Activer le module de modÃ©ration
  </label>

  <hr>

  <!-- ğŸ® Salon pour jeux gratuits -->
  <label for="epicChannel">ğŸ“¦ Salon Jeux Gratuits :</label>
  <select id="epicChannel" name="epicChannel" required>
    <option disabled selected value="">â€” Choisir un salon â€”</option>
    <% Object.values(groupedChannels).forEach(group => { %>
      <optgroup label="<%= group.name %>">
        <% group.channels.forEach(channel => { %>
          <option value="<%= channel.id %>" <%= config.epicChannel === channel.id ? 'selected' : '' %>>
            #<%= channel.name %>
          </option>
        <% }) %>
      </optgroup>
    <% }) %>
  </select>

  <br><br>

  <!-- â³ Salon pour jeux Ã  venir -->
  <label for="epicComingSoonChannel">â³ Salon Prochainement :</label>
  <select id="epicComingSoonChannel" name="epicComingSoonChannel" required>
    <option disabled selected value="">â€” Choisir un salon â€”</option>
    <% Object.values(groupedChannels).forEach(group => { %>
      <optgroup label="<%= group.name %>">
        <% group.channels.forEach(channel => { %>
          <option value="<%= channel.id %>" <%= config.epicComingSoonChannel === channel.id ? 'selected' : '' %>>
            #<%= channel.name %>
          </option>
        <% }) %>
      </optgroup>
    <% }) %>
  </select>

  <br><br>

  <!-- ğŸ“ Salon pour logs -->
  <label for="epicLogsChannel">ğŸ“ Salon Logs Epic :</label>
  <select id="epicLogsChannel" name="epicLogsChannel" required>
    <option disabled selected value="">â€” Choisir un salon â€”</option>
    <% Object.values(groupedChannels).forEach(group => { %>
      <optgroup label="<%= group.name %>">
        <% group.channels.forEach(channel => { %>
          <option value="<%= channel.id %>" <%= config.epicLogsChannel === channel.id ? 'selected' : '' %>>
            #<%= channel.name %>
          </option>
        <% }) %>
      </optgroup>
    <% }) %>
  </select>

  <br><br>
  <button type="submit">ğŸ’¾ Enregistrer</button>
</form>

<p><a href="/dashboard">â† Retour Ã  mes serveurs</a></p>
