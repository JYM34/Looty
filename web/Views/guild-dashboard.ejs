<% title = "Dashboard â€“ " + guild.name %>

<!-- ğŸ› ï¸ Configuration du serveur -->
<h1>ğŸ”§ Configuration de <%= guild.name %></h1>

<!-- ğŸ‘¤ Infos de base -->
<p>ID du serveur : <%= guild.id %></p>
<p>ConnectÃ© en tant que <strong><%= user.username %>#<%= user.discriminator %></strong></p>

<hr>

<!-- ğŸ›¡ï¸ Statut des modules -->
<h2>ğŸ›¡ï¸ Statut des modules</h2>
<p>
  ModÃ©ration :
  <% if (config.moderation) { %>
    <span class="status on">âœ… ActivÃ©</span>
  <% } else { %>
    <span class="status off">âŒ DÃ©sactivÃ©</span>
  <% } %>
</p>

<hr>

<!-- ğŸ“‹ Formulaire de configuration -->
<form action="/dashboard/<%= guild.id %>" method="POST">

  <!-- âœï¸ PrÃ©fixe du bot -->
  <label for="prefix">PrÃ©fixe du bot :</label>
  <input
    type="text"
    id="prefix"
    name="prefix"
    value="<%= config.prefix || '!' %>"
    maxlength="5"
    required
  />
  <br><br>

  <!-- âœ… Activation du module de modÃ©ration -->
  <label>
    <input
      type="checkbox"
      name="moderation"
      value="true"
      <%= config.moderation ? "checked" : "" %>
    />
    Activer le module de modÃ©ration
  </label>
  <br><br>

  <!-- ğŸ® SÃ©lection du salon pour les jeux *actuels* -->
  <label for="epicChannel">Salon pour les jeux <strong>actuels</strong> :</label>
  <select id="epicChannel" name="epicChannel" required>
    <option disabled selected value="">â€” Choisir un salon â€”</option>
    <% Object.entries(groupedChannels).forEach(([groupName, channels]) => { %>
      <optgroup label="<%= groupName %>">
        <% channels.forEach(channel => { %>
          <option value="<%= channel.id %>" <%= config.currentGamesChannelId === channel.id ? 'selected' : '' %>>
            #<%= channel.name %>
          </option>
        <% }) %>
      </optgroup>
    <% }) %>
  </select>
  <br><br>

  <!-- â³ SÃ©lection du salon pour les jeux *Ã  venir* -->
  <label for="epicComingSoonChannel">Salon pour les jeux <strong>Ã  venir</strong> :</label>
  <select id="epicComingSoonChannel" name="epicComingSoonChannel" required>
    <option disabled selected value="">â€” Choisir un salon â€”</option>
    <% Object.entries(groupedChannels).forEach(([groupName, channels]) => { %>
      <optgroup label="<%= groupName %>">
        <% channels.forEach(channel => { %>
          <option value="<%= channel.id %>" <%= config.nextGamesChannelId === channel.id ? 'selected' : '' %>>
            #<%= channel.name %>
          </option>
        <% }) %>
      </optgroup>
    <% }) %>
  </select>
  <br><br>

  <!-- ğŸ“ Salon pour les logs Epic -->
  <label for="epicLogsChannel">Salon des logs Epic :</label>
  <select id="epicLogsChannel" name="epicLogsChannel">
    <option value="">â€” Aucun â€”</option>
    <% Object.entries(groupedChannels).forEach(([groupName, channels]) => { %>
      <optgroup label="<%= groupName %>">
        <% channels.forEach(channel => { %>
          <option value="<%= channel.id %>" <%= config.logsChannelId === channel.id ? 'selected' : '' %>>
            #<%= channel.name %>
          </option>
        <% }) %>
      </optgroup>
    <% }) %>
  </select>
  <br><br>

  <!-- ğŸ’¾ Enregistrement -->
  <button type="submit">ğŸ’¾ Enregistrer</button>
</form>

<!-- ğŸ”™ Retour -->
<p><a href="/dashboard">â† Retour Ã  mes serveurs</a></p>
